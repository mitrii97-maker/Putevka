<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Рейсы БелАЗ — Liquid Glass</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="theme-color" content="#000000">

<style>
body {
  margin:0; padding:18px;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:radial-gradient(circle at 40% 0%, #161720, #050508 70%);
  color:white;
}

/* liquid glass container */
.card {
  background:rgba(255,255,255,0.06);
  border-radius:22px;
  border:1px solid rgba(255,255,255,0.28);
  backdrop-filter:blur(28px) saturate(180%);
  -webkit-backdrop-filter:blur(28px) saturate(180%);
  position:relative;
  overflow:hidden;
  padding:16px;
  margin-bottom:18px;
  box-shadow:0 20px 40px rgba(0,0,0,0.65);
}
.card::before {
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 20% 0%, rgba(255,255,255,0.25), transparent 60%),
    radial-gradient(circle at 80% 100%, rgba(255,255,255,0.16), transparent 60%);
  mix-blend-mode:screen; opacity:.75;
  pointer-events:none;
}

h1 {margin:0 0 6px 0; font-size:22px; display:flex; gap:8px; align-items:center;}

input {
  width:100%; padding:12px; font-size:16px;
  border:none; border-radius:14px;
  background:rgba(255,255,255,0.12); color:white;
  margin-top:8px;
}
button {
  padding:12px; width:100%;
  margin-top:10px; font-size:16px;
  background:rgba(255,255,255,0.15);
  border:none; border-radius:14px; color:white;
}
.truck {
  background:rgba(255,255,255,0.12);
  border-radius:18px;
  padding:12px; margin:10px 0;
  display:flex; justify-content:space-between; align-items:center;
  backdrop-filter:blur(18px);
}
.controls button {
  width:38px; height:38px;
  border-radius:20px; margin-left:6px;
}
.small {font-size:14px;}
</style>
</head>
<body>

<div class="card">
  <h1>⛏️ Рейсы БелАЗ</h1>
  <div>1 рейс = 37.8 м³</div>
</div>

<div class="card">
  <label>Наряд (м³):</label>
  <input id="plan">
  <button onclick="setPlan()">OK</button>
  <div id="planInfo" style="margin-top:8px; opacity:.8;"></div>
</div>

<div class="card">
  <label>Добавить БелАЗ:</label>
  <input id="truckNum" placeholder="например, 312">
  <button onclick="addTruck()">Добавить</button>
</div>

<div class="card">
  <div id="list"></div>
</div>

<div class="card">
  <div id="footer"></div>
  <button onclick="copyData()">Скопировать</button>
</div>

<script>
let TRIP = 37.8;
let plan = 0;
let trucks = [];

function setPlan(){
  plan = Number(document.getElementById('plan').value) || 0;
  render();
}

function addTruck(){
  let v = document.getElementById('truckNum').value.trim();
  if(!v) return;
  trucks.push({id:v, trips:0});
  document.getElementById('truckNum').value="";
  render();
}

function mod(i,d){
  trucks[i].trips = Math.max(0, trucks[i].trips + d);
  render();
}

function render(){
  let list = document.getElementById('list');
  list.innerHTML="";
  let totalTrips = trucks.reduce((s,t)=>s+t.trips,0);
  let done = totalTrips*TRIP;
  let over = plan>0 ? Math.max(0, done-plan) : 0;

  trucks.forEach((t,i)=>{
    let div=document.createElement('div');
    div.className='truck';
    div.innerHTML = `
      <div>БЕЛАЗ ${t.id}<br><small>${t.trips} рейсов (${(t.trips*TRIP).toFixed(1)} м³)</small></div>
      <div class="controls">
        <button onclick="mod(${i},-1)">-</button>
        <button class="small">${t.trips}</button>
        <button onclick="mod(${i},1)">+</button>
      </div>`;
    list.appendChild(div);
  });

  let planInfo = document.getElementById('planInfo');
  if(plan>0){
    planInfo.innerHTML = `
      Выполнено: ${done.toFixed(1)} м³  
      <br>Осталось: ${(plan-done>0?plan-done:0).toFixed(1)} м³
      <br>Плюсом: ${over.toFixed(1)} м³`;
  }

  document.getElementById('footer').innerHTML =
    `Итого: ${totalTrips} рейсов, ${done.toFixed(1)} м³`;
}

function copyData(){
  let totalTrips = trucks.reduce((s,t)=>s+t.trips,0);
  let done = totalTrips*TRIP;
  let over = plan>0 ? Math.max(0, done-plan) : 0;

  let text = `Рейсы БелАЗ
Наряд: ${plan}
Итого: ${totalTrips} рейсов, ${done.toFixed(1)} м³
Плюсом: ${over.toFixed(1)} м³

`;
  trucks.forEach(t=>{
    text+=`БЕЛАЗ ${t.id}: ${t.trips} рейсов (${(t.trips*TRIP).toFixed(1)} м³)
`;
  });

  navigator.clipboard.writeText(text);
  alert("Скопировано");
}
</script>

</body>
</html>
