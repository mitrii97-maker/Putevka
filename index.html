<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>–®–∞—Ö—Ç–∞ –ú–∞–π–Ω–µ—Ä 2.0</title>

<style>
/* ============= –û–°–ù–û–í–ê UI =============== */
body {
  margin: 0;
  padding: 0;
  background: #050510;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  color: #fff;
  overflow: hidden;
  user-select: none;
}

.screen {
  display: none;
  height: 100vh;
  width: 100vw;
  padding-top: 20px;
  box-sizing: border-box;
}

.active {
  display: block;
}

h2 {
  text-align: center;
  font-size: 26px;
  margin-bottom: 10px;
}

.container {
  width: 92%;
  max-width: 500px;
  margin: auto;
}

/* ============= –ü–ê–†–ê–õ–õ–ê–ö–° –®–ê–•–¢–ê =============== */
.mine-box {
  width: 100%;
  height: 220px;
  border-radius: 20px;
  overflow: hidden;
  margin-bottom: 20px;
  position: relative;
  background: #0b0b15;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
}

.layer {
  position: absolute;
  width: 100%;
  height: 200%;
  background-size: cover;
  animation: scrollLayer linear infinite;
}

@keyframes scrollLayer {
  from { transform: translateY(0); }
  to   { transform: translateY(-50%); }
}

.l1 { background-image: url("https://i.ibb.co/4VPGj1L/layer1.jpg"); animation-duration: 8s; opacity: 0.35; }
.l2 { background-image: url("https://i.ibb.co/9h6PbpH/layer2.jpg"); animation-duration: 12s; opacity: 0.25; }
.l3 { background-image: url("https://i.ibb.co/LddXYFn/layer3.jpg"); animation-duration: 16s; opacity: 0.15; }

/* ============= –ö–ù–û–ü–ö–ê –ú–ê–ô–ù–ò–ù–ì–ê =============== */
#mineButton {
  width: 100%;
  padding: 20px;
  font-size: 26px;
  border: none;
  border-radius: 22px;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(180deg, #5fa8ff, #006aff);
  box-shadow: 0 12px 40px rgba(0,110,255,0.4);
  transition: 0.1s;
}
#mineButton:active { transform: scale(0.92); }

/* ============= POPUP –¶–ò–§–†–´ =============== */
.pop {
  position: absolute;
  font-size: 20px;
  color: #9cf;
  animation: floatUp 0.9s ease-out forwards;
  pointer-events: none;
}

@keyframes floatUp {
  from { transform: translateY(0); opacity: 1; }
  to   { transform: translateY(-40px); opacity: 0; }
}

/* ============= –ü–õ–ê–í–ê–Æ–©–ê–Ø –ö–ù–û–ü–ö–ê –ú–ï–ù–Æ =============== */
.menu-btn {
  position: fixed;
  right: 20px;
  bottom: 25px;
  width: 65px;
  height: 65px;
  background: rgba(100,120,255,0.28);
  border-radius: 50%;
  backdrop-filter: blur(18px);
  box-shadow: 0 0 20px rgba(80,100,255,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 32px;
  cursor: pointer;
  transition: 0.25s;
  z-index: 99;
}
.menu-btn:active { transform: scale(0.9); }

/* ============= –í–´–ï–ó–ñ–ê–Æ–©–ï–ï –ú–ï–ù–Æ =============== */
.side-menu {
  position: fixed;
  right: -240px;
  top: 0;
  height: 100vh;
  width: 240px;
  background: rgba(50,60,140,0.25);
  backdrop-filter: blur(25px);
  box-shadow: -5px 0 25px rgba(0,0,40,0.5);
  transition: 0.4s;
  padding-top: 80px;
  z-index: 98;
}

.side-menu.active {
  right: 0;
}

.menu-item {
  padding: 18px;
  font-size: 20px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  cursor: pointer;
}

/* ============= –ö–ê–†–¢–û–ß–ö–ò / –ö–ù–û–ü–ö–ò =============== */
.card {
  backdrop-filter: blur(18px);
  background: rgba(255,255,255,0.06);
  padding: 15px;
  border-radius: 16px;
  margin-bottom: 14px;
}

.btn {
  width: 100%;
  padding: 15px;
  border: none;
  border-radius: 15px;
  background: rgba(130,160,255,0.25);
  color: #fff;
  font-size: 18px;
  margin-top: 10px;
}

/* ============= –ë–ò–¢–í–ê –° –ë–û–°–°–û–ú =============== */
.boss-box {
  width: 92%;
  max-width: 500px;
  margin: auto;
  margin-top: 30px;
  text-align: center;
}

.bar {
  width: 100%;
  height: 18px;
  background: rgba(255,255,255,0.1);
  border-radius: 14px;
  overflow: hidden;
  position: relative;
}

.slider {
  width: 30%;
  height: 100%;
  background: #6af;
  position: absolute;
  animation: slideBar 1s linear infinite alternate;
}

.target {
  position: absolute;
  left: 40%;
  width: 20%;
  height: 100%;
  background: rgba(255,255,0,0.3);
}

@keyframes slideBar {
  from { left: 0; }
  to   { left: 70%; }
}
</style>
</head>

<body>

<!-- ========================= –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é ========================= -->
<div class="side-menu" id="sideMenu">
  <div class="menu-item" onclick="openScreen('main')">üè† –ì–ª–∞–≤–Ω–∞—è</div>
  <div class="menu-item" onclick="openScreen('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
  <div class="menu-item" onclick="openScreen('pets')">üêæ –ü–∏—Ç–æ–º—Ü—ã</div>
  <div class="menu-item" onclick="openScreen('inv')">üéÅ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
  <div class="menu-item" onclick="openScreen('boss')">üíÄ –ë–æ—Å—Å</div>
</div>

<!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ -->
<div class="menu-btn" onclick="toggleMenu()">‚öô</div>

<!-- ========================= –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ========================= -->
<div class="screen active" id="main">
  <div class="container">
    <h2>‚õè –®–∞—Ö—Ç–∞</h2>
    <div id="stats">–ì–ª—É–±–∏–Ω–∞: 0 –º | –ó–æ–ª–æ—Ç–æ: 0 | –ö–ª—é—á–∏: 0</div>

    <div class="mine-box">
      <div class="layer l1"></div>
      <div class="layer l2"></div>
      <div class="layer l3"></div>
    </div>

    <button id="mineButton">–ú–ê–ô–ù–ò–¢–¨</button>
  </div>
</div>

<!-- ========================= –ú–ê–ì–ê–ó–ò–ù ========================= -->
<div class="screen" id="shop">
  <div class="container">
    <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>

    <div class="card">
      –£–ª—É—á—à–∏—Ç—å –∫–∏—Ä–∫—É (+1 –º–æ—â–Ω–æ—Å—Ç—å) ‚Äî 200 –∑–æ–ª–æ—Ç–∞
      <button class="btn" onclick="buyPower()">–ö—É–ø–∏—Ç—å</button>
    </div>

    <div class="card">
      –ö—É–ø–∏—Ç—å —Ä–æ–±–æ—Ç–∞-–º–∞–π–Ω–µ—Ä–∞ (+1 –∑–æ–ª–æ—Ç–æ/—Å–µ–∫) ‚Äî 500 –∑–æ–ª–æ—Ç–∞
      <button class="btn" onclick="buyMiner()">–ö—É–ø–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- ========================= –ü–ò–¢–û–ú–¶–´ ========================= -->
<div class="screen" id="pets">
  <div class="container">
    <h2>üêæ –ü–∏—Ç–æ–º—Ü—ã</h2>

    <div class="card">
      –ö—Ä–æ—Ç ‚Äî +10% –¥–æ–±—ã—á–∏ ‚Äî 1000 –∑–æ–ª–æ—Ç–∞
      <button class="btn" onclick="buyPet('krot',1000)">–ö—É–ø–∏—Ç—å</button>
    </div>

    <div class="card">
      –ì–Ω–æ–º ‚Äî +1 –º–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–∏ –∫–ª–∏–∫–µ ‚Äî 1800 –∑–æ–ª–æ—Ç–∞
      <button class="btn" onclick="buyPet('gnom',1800)">–ö—É–ø–∏—Ç—å</button>
    </div>

    <div class="card">
      –î—Ä–∞–∫–æ–Ω—á–∏–∫ ‚Äî +5% —à–∞–Ω—Å —Ä–µ–¥–∫–æ—Å—Ç–∏ ‚Äî 3000 –∑–æ–ª–æ—Ç–∞
      <button class="btn" onclick="buyPet('dragon',3000)">–ö—É–ø–∏—Ç—å</button>
    </div>
  </div>
</div>

<!-- ========================= –ò–ù–í–ï–ù–¢–ê–†–¨ ========================= -->
<div class="screen" id="inv">
  <div class="container">
    <h2>üéÅ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>

    <div class="card">
      –ö–ª—é—á–∏: <span id="keysText">0</span>
    </div>

    <div class="card">
      –û–±—ã—á–Ω—ã–π —Å—É–Ω–¥—É–∫ ‚Äî —Ç—Ä–µ–±—É–µ—Ç 1 –∫–ª—é—á  
      <button class="btn" onclick="openChest('normal')">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>

    <div class="card">
      –ú–∞–≥–∏—á–µ—Å–∫–∏–π —Å—É–Ω–¥—É–∫ ‚Äî —Ç—Ä–µ–±—É–µ—Ç 3 –∫–ª—é—á–∞  
      <button class="btn" onclick="openChest('magic')">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

<!-- ========================= –ë–û–°–° ========================= -->
<div class="screen" id="boss">
  <h2>üíÄ –ë–∏—Ç–≤–∞ —Å –±–æ—Å—Å–æ–º</h2>
  <div class="boss-box">
    <p>–ü–æ–ø–∞–¥–∏ –≤ –∑–æ–Ω—É!</p>

    <div class="bar">
      <div class="target"></div>
      <div class="slider" id="slider"></div>
    </div>

    <button class="btn" onclick="attackBoss()">–ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>

    <div style="margin-top:20px;" id="bossInfo"></div>
  </div>
</div>

<script>
/* ================================================================
                        –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –î–ê–ù–ù–´–ï
================================================================ */
let depth = 0;
let gold = 0;
let keys = 0;

let power = 1;
let miners = 0;

let pets = {
  krot: false,
  gnom: false,
  dragon: false
};

function save() {
  localStorage.setItem("miner2", JSON.stringify({ depth, gold, keys, power, miners, pets }));
}
function load() {
  let data = localStorage.getItem("miner2");
  if (data) {
    let g = JSON.parse(data);
    depth = g.depth;
    gold = g.gold;
    keys = g.keys;
    power = g.power;
    miners = g.miners;
    pets = g.pets;
  }
}
load();

function updateUI() {
  document.getElementById("stats").textContent =
    `–ì–ª—É–±–∏–Ω–∞: ${Math.floor(depth)} –º | –ó–æ–ª–æ—Ç–æ: ${gold} | –ö–ª—é—á–∏: ${keys}`;
  document.getElementById("keysText").textContent = keys;
  save();
}
updateUI();

/* ================================================================
                        –ù–ê–í–ò–ì–ê–¶–ò–Ø –≠–ö–†–ê–ù–û–í
================================================================ */
function openScreen(screen) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(screen).classList.add('active');
  sideMenu.classList.remove('active');
}

function toggleMenu() {
  sideMenu.classList.toggle('active');
}

/* ================================================================
                            –ú–ê–ô–ù–ò–ù–ì
================================================================ */
function getMaterial() {
  let r = Math.random();
  let mult = 1;
  if (pets.krot) mult += 0.1;
  if (pets.dragon) r -= 0.05;

  if (r < 0.6) return { name:"–£–≥–æ–ª—å", value:1 * mult };
  if (r < 0.85) return { name:"–ñ–µ–ª–µ–∑–æ", value:3 * mult };
  if (r < 0.95) return { name:"–ó–æ–ª–æ—Ç–æ", value:7 * mult };
  if (r < 0.985) return { name:"–ê–ª–º–∞–∑", value:15 * mult };
  if (r < 0.997) return { name:"–¢–∏—Ç–∞–Ω", value:35 * mult };
  return { name:"–ú–∏—Ñ—Ä–∏–ª", value:100 * mult };
}

mineButton.onclick = (e) => {
  depth += power;

  let mat = getMaterial();
  let added = Math.floor(mat.value);

  gold += added;
  if (pets.gnom) gold += 1;

  let p = document.createElement("div");
  p.className = "pop";
  p.textContent = "+" + added;
  p.style.left = e.clientX + "px";
  p.style.top = e.clientY + "px";
  document.body.appendChild(p);
  setTimeout(() => p.remove(), 900);

  updateUI();
};

/* ================================================================
                          –ê–í–¢–û–î–û–ë–´–ß–ê
================================================================ */
setInterval(() => {
  if (miners > 0) {
    gold += miners;
    depth += miners * 0.2;
    updateUI();
  }
}, 1000);

/* ================================================================
                           –ú–ê–ì–ê–ó–ò–ù
================================================================ */
function buyPower() {
  if (gold >= 200) {
    gold -= 200;
    power++;
    updateUI();
  }
}
function buyMiner() {
  if (gold >= 500) {
    gold -= 500;
    miners++;
    updateUI();
  }
}

/* ================================================================
                           –ü–ò–¢–û–ú–¶–´
================================================================ */
function buyPet(p, cost) {
  if (!pets[p] && gold >= cost) {
    gold -= cost;
    pets[p] = true;
    updateUI();
  }
}

/* ================================================================
                           –°–£–ù–î–£–ö–ò
================================================================ */
function openChest(type) {
  if (type === "normal") {
    if (keys < 1) return;
    keys--;
    gold += Math.floor(50 + Math.random()*100);
  } else {
    if (keys < 3) return;
    keys -= 3;
    gold += Math.floor(200 + Math.random()*300);
  }
  updateUI();
}

/* ================================================================
                          –ë–û–°–° (—Ç–∞–π–º–∏–Ω–≥)
================================================================ */
function attackBoss() {
  let slider = document.getElementById("slider");
  let pos = parseInt(slider.style.left) || 0;

  if (pos > 40 && pos < 60) {
    keys++;
    gold += 200;
    document.getElementById("bossInfo").textContent = "–ü–æ–±–µ–¥–∞! +200 –∑–æ–ª–æ—Ç–∞ –∏ –∫–ª—é—á!";
  } else {
    document.getElementById("bossInfo").textContent = "–ü—Ä–æ–º–∞—Ö!";
  }
  updateUI();
}

/* ================================================================ */
</script>
</body>
</html>
