<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>–®–∞—Ö—Ç–∞ –ú–∞–π–Ω–µ—Ä 3.0</title>

<style>
/* ===========================================================
                    –ì–õ–û–ë–ê–õ–¨–ù–´–ô –°–¢–ò–õ–¨
=========================================================== */
body {
  margin: 0;
  padding: 0;
  background: #040414;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  user-select: none;
  overflow: hidden;
}

.screen {
  display: none;
  height: 100vh;
  width: 100vw;
  padding: 20px 0;
  overflow-y: auto;
  box-sizing: border-box;
}

.active {
  display: block;
}

h2 {
  text-align: center;
  font-size: 28px;
  margin-bottom: 15px;
}

.container {
  width: 92%;
  max-width: 520px;
  margin: auto;
}

/* ===========================================================
                      –ü–ê–†–ê–õ–õ–ê–ö–° –®–ê–•–¢–´
=========================================================== */
.mine-box {
  width: 100%;
  height: 240px;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 20px;
  position: relative;
  background: #0b0b15;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
}

.layer {
  position: absolute;
  width: 100%;
  height: 200%;
  background-size: cover;
  animation: scroll linear infinite;
}

@keyframes scroll {
  from { transform: translateY(0); }
  to   { transform: translateY(-50%); }
}

.l1 {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhC...); 
  animation-duration: 8s;
  opacity: 0.40;
}

.l2 {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhC...);
  animation-duration: 12s;
  opacity: 0.30;
}

.l3 {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhC...);
  animation-duration: 16s;
  opacity: 0.22;
}

/* ===========================================================
                     –ö–ù–û–ü–ö–ê –ú–ê–ô–ù–ò–ù–ì–ê
=========================================================== */
#mineButton {
  width: 100%;
  padding: 22px;
  border: none;
  border-radius: 20px;
  font-size: 28px;
  font-weight: bold;
  color: #fff;
  background: linear-gradient(180deg, #79a8ff, #246bff);
  box-shadow: 0 10px 35px rgba(50,120,255,0.5);
  margin-bottom: 20px;
}
#mineButton:active {
  transform: scale(0.92);
}

/* ===========================================================
                      POPUP + –í–ò–ë–†–ê–¶–ò–ò
=========================================================== */
.pop {
  position: absolute;
  font-size: 22px;
  font-weight: bold;
  color: #9cf;
  animation: floatUp 0.9s ease-out forwards;
  pointer-events: none;
}

@keyframes floatUp {
  from { transform: translateY(0); opacity: 1; }
  to   { transform: translateY(-45px); opacity: 0; }
}

/* ===========================================================
                   –ü–õ–ê–í–ê–Æ–©–ï–ï –ú–ï–ù–Æ ‚öô
=========================================================== */
.menu-btn {
  position: fixed;
  right: 22px;
  bottom: 25px;
  width: 68px;
  height: 68px;
  background: rgba(120,140,255,0.32);
  border-radius: 50%;
  backdrop-filter: blur(20px);
  box-shadow: 0 0 25px rgba(100,120,255,0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 34px;
  cursor: pointer;
  z-index: 999;
}
.menu-btn:active {
  transform: scale(0.9);
}

/* ===========================================================
                   –ë–û–ö–û–í–û–ï –í–´–ï–ó–ñ–ê–Æ–©–ï–ï –ú–ï–ù–Æ
=========================================================== */
.side-menu {
  position: fixed;
  right: -260px;
  top: 0;
  width: 260px;
  height: 100vh;
  background: rgba(60,80,200,0.24);
  backdrop-filter: blur(25px);
  box-shadow: -5px 0 35px rgba(0,0,60,0.6);
  padding-top: 80px;
  transition: 0.4s;
  z-index: 998;
}

.side-menu.active {
  right: 0;
}

.menu-item {
  padding: 20px;
  font-size: 22px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  cursor: pointer;
}

/* ===========================================================
              –ü–õ–ò–¢–ö–ò (CLASH ROYALE STYLE)
=========================================================== */
.tile {
  width: 100%;
  background: linear-gradient(180deg, #1c1f45, #0e1033);
  border-radius: 18px;
  padding: 15px;
  margin-bottom: 18px;
  box-shadow: 0 6px 18px rgba(0,0,50,0.6);
  position: relative;
}

.tile-icon {
  width: 72px;
  height: 72px;
  background-size: cover;
  border-radius: 12px;
  margin-bottom: 10px;
}

.tile-title {
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 5px;
}

.tile-desc {
  font-size: 16px;
  opacity: 0.8;
  margin-bottom: 10px;
}

.tile-price {
  font-size: 18px;
  color: #9cf;
  margin-bottom: 10px;
}

.buy-btn {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 14px;
  font-size: 18px;
  background: linear-gradient(180deg, #5fa0ff, #2070ff);
  color: white;
  font-weight: 600;
  box-shadow: 0 6px 14px rgba(40,110,255,0.4);
}
.buy-btn:active {
  transform: scale(0.94);
}

/* ===========================================================
                     –ë–û–°–° ‚Äî –¢–ê–ô–ú–ò–ù–ì
=========================================================== */
.boss-box {
  text-align: center;
  width: 92%;
  margin: auto;
  margin-top: 20px;
}

.bar {
  width: 100%;
  height: 18px;
  background: rgba(255,255,255,0.12);
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 20px;
  position: relative;
}

.target {
  width: 20%;
  height: 100%;
  background: rgba(255,240,0,0.35);
  position: absolute;
  left: 40%;
}

.slider {
  width: 25%;
  height: 100%;
  background: #6af;
  position: absolute;
  animation: slideBar 1s linear infinite alternate;
}

@keyframes slideBar {
  from { left: 0; }
  to   { left: 75%; }
}
</style>
</head>

<body>

<!-- ===========================================================
                       –ë–û–ö–û–í–û–ï –ú–ï–ù–Æ
=========================================================== -->
<div class="side-menu" id="sideMenu">
  <div class="menu-item" onclick="openScreen('main')">üè† –ì–ª–∞–≤–Ω–∞—è</div>
  <div class="menu-item" onclick="openScreen('shop')">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
  <div class="menu-item" onclick="openScreen('pets')">üêæ –ü–∏—Ç–æ–º—Ü—ã</div>
  <div class="menu-item" onclick="openScreen('inv')">üéÅ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
  <div class="menu-item" onclick="openScreen('boss')">üíÄ –ë–æ—Å—Å</div>
</div>
<div class="menu-btn" onclick="toggleMenu()">‚öô</div>


<!-- ===========================================================
                        –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù
=========================================================== -->
<div class="screen active" id="main">
  <div class="container">
    <h2>‚õè –®–∞—Ö—Ç–∞</h2>
    <div id="stats" style="text-align:center; margin-bottom:15px;">–ì–ª—É–±–∏–Ω–∞: 0 –º | –ó–æ–ª–æ—Ç–æ: 0 | –ö–ª—é—á–∏: 0</div>

    <div class="mine-box">
      <div class="layer l1"></div>
      <div class="layer l2"></div>
      <div class="layer l3"></div>
    </div>

    <button id="mineButton">–ú–ê–ô–ù–ò–¢–¨</button>
  </div>
</div>


<!-- ===========================================================
                         –ú–ê–ì–ê–ó–ò–ù
=========================================================== -->
<div class="screen" id="shop">
  <div class="container">
    <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>

    <!-- –ö–∏—Ä–∫–∞ -->
    <div class="tile">
      <div class="tile-icon" style="background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA...);"></div>
      <div class="tile-title">–£–ª—É—á—à–∏—Ç—å –ö–∏—Ä–∫—É</div>
      <div class="tile-desc">+1 –º–æ—â–Ω–æ—Å—Ç—å –∫–ª–∏–∫–∞</div>
      <div class="tile-price">–¶–µ–Ω–∞: 200</div>
      <button class="buy-btn" onclick="buyPower()">–ö—É–ø–∏—Ç—å</button>
    </div>

    <!-- –†–æ–±–æ—Ç-–º–∞–π–Ω–µ—Ä -->
    <div class="tile">
      <div class="tile-icon" style="background-image:url(data:image/png;base64,iVBORw0KGgoAA...);"></div>
      <div class="tile-title">–†–æ–±–æ—Ç-–º–∞–π–Ω–µ—Ä</div>
      <div class="tile-desc">+1 –∑–æ–ª–æ—Ç–æ –≤ —Å–µ–∫—É–Ω–¥—É</div>
      <div class="tile-price">–¶–µ–Ω–∞: 500</div>
      <button class="buy-btn" onclick="buyMiner()">–ö—É–ø–∏—Ç—å</button>
    </div>

  </div>
</div>


<!-- ===========================================================
                         –ü–ò–¢–û–ú–¶–´
=========================================================== -->
<div class="screen" id="pets">
  <div class="container">
    <h2>üêæ –ü–∏—Ç–æ–º—Ü—ã</h2>

    <!-- –ö—Ä–æ—Ç -->
    <div class="tile">
      <div class="tile-icon" style="background-image:url(data:image/png;base64,iVBORw0KGg...);"></div>
      <div class="tile-title">–ö—Ä–æ—Ç</div>
      <div class="tile-desc">+10% –¥–æ–±—ã—á–∏</div>
      <div class="tile-price">–¶–µ–Ω–∞: 1000</div>
      <button class="buy-btn" onclick="buyPet('krot',1000)">–ö—É–ø–∏—Ç—å</button>
    </div>

    <!-- –ì–Ω–æ–º -->
    <div class="tile">
      <div class="tile-icon" style="background-image:url(data:image/png;base64,iVBORw0KGgoAAA...);"></div>
      <div class="tile-title">–ì–Ω–æ–º</div>
      <div class="tile-desc">+1 –∑–æ–ª–æ—Ç–æ –ø—Ä–∏ –∫–ª–∏–∫–µ</div>
      <div class="tile-price">–¶–µ–Ω–∞: 1800</div>
      <button class="buy-btn" onclick="buyPet('gnom',1800)">–ö—É–ø–∏—Ç—å</button>
    </div>

    <!-- –î—Ä–∞–∫–æ–Ω -->
    <div class="tile">
      <div class="tile-icon" style="background-image:url(data:image/png;base64,iVBOR...);"></div>
      <div class="tile-title">–î—Ä–∞–∫–æ–Ω—á–∏–∫</div>
      <div class="tile-desc">+5% —à–∞–Ω—Å —Ä–µ–¥–∫–æ—Å—Ç–∏</div>
      <div class="tile-price">–¶–µ–Ω–∞: 3000</div>
      <button class="buy-btn" onclick="buyPet('dragon',3000)">–ö—É–ø–∏—Ç—å</button>
    </div>

  </div>
</div>


<!-- ===========================================================
                        –ò–ù–í–ï–ù–¢–ê–†–¨
=========================================================== -->
<div class="screen" id="inv">
  <div class="container">
    <h2>üéÅ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>

    <div class="tile">
      <div class="tile-title">–í–∞—à–∏ –∫–ª—é—á–∏</div>
      <div class="tile-desc">–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å—É–Ω–¥—É–∫–æ–≤</div>
      <div class="tile-price">–ö–ª—é—á–∏: <span id="keysText">0</span></div>
    </div>

    <div class="tile">
      <div class="tile-title">–û–±—ã—á–Ω—ã–π —Å—É–Ω–¥—É–∫</div>
      <div class="tile-desc">1 –∫–ª—é—á ‚Üí +50‚Äì150 –∑–æ–ª–æ—Ç–∞</div>
      <button class="buy-btn" onclick="openChest('normal')">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>

    <div class="tile">
      <div class="tile-title">–ú–∞–≥–∏—á–µ—Å–∫–∏–π —Å—É–Ω–¥—É–∫</div>
      <div class="tile-desc">3 –∫–ª—é—á–∞ ‚Üí +200‚Äì500 –∑–æ–ª–æ—Ç–∞</div>
      <button class="buy-btn" onclick="openChest('magic')">–û—Ç–∫—Ä—ã—Ç—å</button>
    </div>

  </div>
</div>


<!-- ===========================================================
                          –ë–û–°–°
=========================================================== -->
<div class="screen" id="boss">
  <h2>üíÄ –ë–∏—Ç–≤–∞ —Å –±–æ—Å—Å–æ–º</h2>

  <div class="boss-box">
    <p>–ü–æ–ø–∞–¥–∏ –ø–æ —Ç–∞–π–º–∏–Ω–≥—É!</p>

    <div class="bar">
      <div class="target"></div>
      <div class="slider" id="slider"></div>
    </div>

    <button class="buy-btn" onclick="attackBoss()">–ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>

    <div style="margin-top:20px;" id="bossInfo"></div>
  </div>
</div>


<script>
/* ===========================================================
                       –û–°–ù–û–í–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
=========================================================== */
let depth = 0;
let gold = 0;
let keys = 0;

let power = 1;
let miners = 0;

let pets = {
  krot: false,
  gnom: false,
  dragon: false
};

/* ===========================================================
                       –°–û–•–†–ê–ù–ï–ù–ò–ï
=========================================================== */
function save() {
  localStorage.setItem("miner3", JSON.stringify({depth,gold,keys,power,miners,pets}));
}

function load() {
  let data = localStorage.getItem("miner3");
  if (!data) return;
  let g = JSON.parse(data);
  depth = g.depth;
  gold = g.gold;
  keys = g.keys;
  power = g.power;
  miners = g.miners;
  pets = g.pets;
}
load();

/* ===========================================================
                       –û–ë–ù–û–í–õ–ï–ù–ò–ï UI
=========================================================== */
function updateUI() {
  document.getElementById("stats").textContent =
    `–ì–ª—É–±–∏–Ω–∞: ${Math.floor(depth)} –º | –ó–æ–ª–æ—Ç–æ: ${gold} | –ö–ª—é—á–∏: ${keys}`;
  document.getElementById("keysText").textContent = keys;

  save();
}
updateUI();

/* ===========================================================
                       –ù–ê–í–ò–ì–ê–¶–ò–Ø
=========================================================== */
function openScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  sideMenu.classList.remove('active');
}

function toggleMenu() {
  document.getElementById("sideMenu").classList.toggle("active");
}

/* ===========================================================
                        –ú–ê–ô–ù–ò–ù–ì
=========================================================== */
function getMaterial() {
  let r = Math.random();

  if (pets.dragon) r -= 0.04;

  let multiplier = pets.krot ? 1.1 : 1;

  if (r < 0.6) return {name:"–£–≥–æ–ª—å", value:1*multiplier};
  if (r < 0.85) return {name:"–ñ–µ–ª–µ–∑–æ", value:3*multiplier};
  if (r < 0.95) return {name:"–ó–æ–ª–æ—Ç–æ", value:7*multiplier};
  if (r < 0.985) return {name:"–ê–ª–º–∞–∑", value:15*multiplier};
  if (r < 0.997) return {name:"–¢–∏—Ç–∞–Ω", value:35*multiplier};
  return {name:"–ú–∏—Ñ—Ä–∏–ª", value:100*multiplier};
}

mineButton.onclick = (e) => {
  depth += power;

  let m = getMaterial();
  let add = Math.floor(m.value);

  gold += add;
  if (pets.gnom) gold += 1;

  let p = document.createElement("div");
  p.className = "pop";
  p.textContent = "+" + add;
  p.style.left = e.clientX + "px";
  p.style.top = e.clientY + "px";
  document.body.appendChild(p);
  setTimeout(() => p.remove(), 900);

  updateUI();
};

/* ===========================================================
                    –ê–í–¢–û–î–û–ë–´–ß–ê
=========================================================== */
setInterval(() => {
  if (miners > 0) {
    gold += miners;
    depth += miners * 0.25;
    updateUI();
  }
}, 1000);

/* ===========================================================
                     –ú–ê–ì–ê–ó–ò–ù ‚Äî –ö–£–ü–ò–¢–¨
=========================================================== */
function buyPower() {
  if (gold < 200) return;
  gold -= 200;
  power++;
  updateUI();
}

function buyMiner() {
  if (gold < 500) return;
  gold -= 500;
  miners++;
  updateUI();
}

/* ===========================================================
                     –ü–û–ö–£–ü–ö–ê –ü–ò–¢–û–ú–¶–ï–í
=========================================================== */
function buyPet(p, cost) {
  if (pets[p]) return;
  if (gold < cost) return;

  pets[p] = true;
  gold -= cost;
  updateUI();
}

/* ===========================================================
                       –°–£–ù–î–£–ö–ò
=========================================================== */
function openChest(type) {
  if (type === "normal") {
    if (keys < 1) return;
    keys--;
    gold += 50 + Math.floor(Math.random()*100);
  } else {
    if (keys < 3) return;
    keys -= 3;
    gold += 200 + Math.floor(Math.random()*300);
  }
  updateUI();
}

/* ===========================================================
                        –ë–û–°–°
=========================================================== */
function attackBoss() {
  let slider = document.getElementById("slider");
  let sliderLeft = parseInt(slider.style.left) || 0;

  if (sliderLeft > 40 && sliderLeft < 60) {
    keys++;
    gold += 200;
    bossInfo.textContent = "üî• –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –£–î–ê–†! +200 –∑–æ–ª–æ—Ç–∞ + –∫–ª—é—á";
  } else {
    bossInfo.textContent = "–ú–∏–º–æ! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!";
  }

  updateUI();
}
</script>

</body>
</html>
